<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Resolve the dependency graph of R packages at a specific time point based on the information from various R-hub web services &lt;https://blog.r-hub.io/&gt;. The dependency graph can then be used to reconstruct the R computational environment with Rocker &lt;https://rocker-project.org&gt;.">
<title>Reconstructing Reproducible R Computational Environments • rang</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/Roboto-0.4.8/font.css" rel="stylesheet">
<link href="deps/JetBrains_Mono-0.4.8/font.css" rel="stylesheet">
<link href="deps/Roboto_Slab-0.4.8/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Reconstructing Reproducible R Computational Environments">
<meta property="og:description" content="Resolve the dependency graph of R packages at a specific time point based on the information from various R-hub web services &lt;https://blog.r-hub.io/&gt;. The dependency graph can then be used to reconstruct the R computational environment with Rocker &lt;https://rocker-project.org&gt;.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">rang</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/compendium.html">Create research compendia</a>
    <a class="dropdown-item" href="articles/faq.html">FAQ</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/gesistsa/rang/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="rang-">rang <img src="reference/figures/rang_logo.png" align="right" width="120"><a class="anchor" aria-label="anchor" href="#rang-"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of rang (Reconstructing Ancient Number-crunching Gears) [1] is to obtain the dependency graph of R packages at a specific time point.</p>
<p>Although this package can also be used to ensure the current R computational environment can be reconstructed by future researchers, this package gears towards reconstructing historical R computational environments which have not been completely declared. For the former purpose, packages such as <a href="https://github.com/rstudio/renv/" class="external-link">renv</a>, <a href="https://github.com/CredibilityLab/groundhog" class="external-link">groundhog</a>, <a href="https://github.com/andrie/miniCRAN" class="external-link">miniCRAN</a>, and <a href="https://github.com/PredictiveEcology/Require" class="external-link">Require</a> should be used. One can think of rang as an archaeological tool.</p>
<p>To reconstruct a historical R computational environment, this package assumes only the availability of source packages online. The reconstruction procedures have been tested in several vintage versions of R.</p>
<p>Please cite this package as:</p>
<p>Chan CH, Schoch D (2023) rang: Reconstructing reproducible R computational environments. PLOS ONE <a href="https://doi.org/10.1371/journal.pone.0286761" class="external-link uri">https://doi.org/10.1371/journal.pone.0286761</a></p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of rang like so:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"gesistsa/rang"</span><span class="op">)</span></span></code></pre></div>
<p>Or the stable CRAN version</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"rang"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>To obtain the dependency graph of R packages, use <code>resolve</code>. Currently, this package supports CRAN, Bioconductor, GitHub, and local packages.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/gesistsa/rang" class="external-link">rang</a></span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/resolve.html">resolve</a></span><span class="op">(</span>pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sna"</span>, <span class="st">"schochastics/rtoot"</span>, <span class="st">"S4Vectors"</span><span class="op">)</span>, snapshot_date <span class="op">=</span> <span class="st">"2022-11-30"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/resolve.html">resolve</a></span><span class="op">(</span>pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"openNLP"</span>, <span class="st">"LDAvis"</span>, <span class="st">"topicmodels"</span>, <span class="st">"quanteda"</span><span class="op">)</span>,</span>
<span>                 snapshot_date <span class="op">=</span> <span class="st">"2020-01-16"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">graph</span></span>
<span><span class="co">#&gt; resolved: 4 package(s). Unresolved package(s): 0 </span></span>
<span><span class="co">#&gt; $`cran::openNLP`</span></span>
<span><span class="co">#&gt; The latest version of `openNLP` [cran] at 2020-01-16 was 0.2-7, which has 3 unique dependencies (2 with no dependencies.)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`cran::LDAvis`</span></span>
<span><span class="co">#&gt; The latest version of `LDAvis` [cran] at 2020-01-16 was 0.3.2, which has 2 unique dependencies (2 with no dependencies.)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`cran::topicmodels`</span></span>
<span><span class="co">#&gt; The latest version of `topicmodels` [cran] at 2020-01-16 was 0.2-9, which has 7 unique dependencies (5 with no dependencies.)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $`cran::quanteda`</span></span>
<span><span class="co">#&gt; The latest version of `quanteda` [cran] at 2020-01-16 was 1.5.2, which has 63 unique dependencies (33 with no dependencies.)</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">graph</span><span class="op">$</span><span class="va">sysreqs</span></span>
<span><span class="co">#&gt; [1] "apt-get install -y default-jdk" "apt-get install -y libxml2-dev"</span></span>
<span><span class="co">#&gt; [3] "apt-get install -y make"        "apt-get install -y zlib1g-dev" </span></span>
<span><span class="co">#&gt; [5] "apt-get install -y libpng-dev"  "apt-get install -y libgsl0-dev"</span></span>
<span><span class="co">#&gt; [7] "apt-get install -y libicu-dev"  "apt-get install -y python3"</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">graph</span><span class="op">$</span><span class="va">r_version</span></span>
<span><span class="co">#&gt; [1] "3.6.2"</span></span></code></pre></div>
<p>The resolved result is an S3 object called <code>rang</code> and can be exported as an installation script. The installation script can be execute on a vanilla R installation.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/export_rang.html">export_rang</a></span><span class="op">(</span><span class="va">graph</span>, <span class="st">"rang.R"</span><span class="op">)</span></span></code></pre></div>
<p>However, the execution of the installation script often fails (now) due to missing system dependencies and incompatible R versions. Therefore, the approach outlined below should be used.</p>
</div>
<div class="section level2">
<h2 id="recreate-the-computational-environment-via-rocker">Recreate the computational environment via Rocker<a class="anchor" aria-label="anchor" href="#recreate-the-computational-environment-via-rocker"></a>
</h2>
<p>A <code>rang</code> object can be used to recreate the computational environment via <a href="https://github.com/rocker-org/rocker" class="external-link">Rocker</a>. Please note that the oldest R version one can get from Rocker is R 3.1.0.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/dockerize.html">dockerize</a></span><span class="op">(</span><span class="va">graph</span>, <span class="st">"~/rocker_test"</span><span class="op">)</span></span></code></pre></div>
<p>Now, you can build and run the Docker container.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ~/rocker_test</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">-t</span> rang .</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--rm</span> <span class="at">--name</span> <span class="st">"rangtest"</span> <span class="at">-ti</span> rang</span></code></pre></div>
<p>Using the above example, <code><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo()</a></code> outputs the following. You have successfully gone back to the pre-pandemic time.</p>
<pre><code>R version 3.6.2 (2019-12-12)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Debian GNU/Linux 10 (buster)

Matrix products: default
BLAS/LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.3.5.so

locale:
 [1] LC_CTYPE=en_US.UTF-8          LC_NUMERIC=C                 
 [3] LC_TIME=en_US.UTF-8           LC_COLLATE=en_US.UTF-8       
 [5] LC_MONETARY=en_US.UTF-8       LC_MESSAGES=C                
 [7] LC_PAPER=en_US.UTF-8          LC_NAME=en_US.UTF-8          
 [9] LC_ADDRESS=en_US.UTF-8        LC_TELEPHONE=en_US.UTF-8     
[11] LC_MEASUREMENT=en_US.UTF-8    LC_IDENTIFICATION=en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] topicmodels_0.2-9 LDAvis_0.3.2      openNLP_0.2-7     quanteda_1.5.2   

loaded via a namespace (and not attached):
 [1] NLP_0.2-0           Rcpp_1.0.3          pillar_1.4.3       
 [4] compiler_3.6.2      tools_3.6.2         stopwords_1.0      
 [7] lubridate_1.7.4     lifecycle_0.1.0     tibble_2.1.3       
[10] gtable_0.3.0        lattice_0.20-38     pkgconfig_2.0.3    
[13] rlang_0.4.2         Matrix_1.2-18       fastmatch_1.1-0    
[16] parallel_3.6.2      openNLPdata_1.5.3-4 rJava_0.9-11       
[19] xml2_1.2.2          stringr_1.4.0       stats4_3.6.2       
[22] grid_3.6.2          data.table_1.12.8   R6_2.4.1           
[25] ggplot2_3.2.1       spacyr_1.2          magrittr_1.5       
[28] scales_1.1.0        modeltools_0.2-22   colorspace_1.4-1   
[31] stringi_1.4.5       RcppParallel_4.4.4  lazyeval_0.2.2     
[34] munsell_0.5.0       tm_0.7-7            slam_0.1-47        
[37] crayon_1.3.4    </code></pre>
<div class="section level3">
<h3 id="caching-r-packages">Caching R packages<a class="anchor" aria-label="anchor" href="#caching-r-packages"></a>
</h3>
<p>One can also cache (or archive) the R packages from CRAN and Github at the time <code>dockerize</code> is executed. The cached R packages will then transfer to the container. Please note that system requirements (i.e. <code>deb</code> packages) are not cached.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/dockerize.html">dockerize</a></span><span class="op">(</span><span class="va">graph</span>, <span class="st">"~/rocker_test"</span>, cache <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="using-alternative-rocker-images">Using alternative Rocker images<a class="anchor" aria-label="anchor" href="#using-alternative-rocker-images"></a>
</h3>
<p>One can also select other Rocker versioned images: <code>rstudio</code>, <code>tidyverse</code>, <code>verse</code>, <code>geospatial</code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/dockerize.html">dockerize</a></span><span class="op">(</span><span class="va">graph</span>, <span class="st">"~/rocker_test"</span>, image <span class="op">=</span> <span class="st">"rstudio"</span><span class="op">)</span></span></code></pre></div>
<p><code>tidyverse</code>, <code>verse</code>, and <code>geospatial</code> are similar to the default (<code>r-ver</code>). For <code>rstudio</code>, one needs to build and launch it with:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ~/rocker_test</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">-t</span> rang .</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-p</span> 8787:8787 <span class="at">-e</span> PASSWORD=abc123 <span class="at">--rm</span> <span class="at">--name</span> <span class="st">"rangtest"</span> <span class="at">-ti</span> rang</span></code></pre></div>
<p>With any browser, go to: <code>local:8787</code>. The default username is <code>rstudio</code>, password is as specified.</p>
</div>
<div class="section level3">
<h3 id="using-apptainersingularity-containers">Using Apptainer/Singularity containers<a class="anchor" aria-label="anchor" href="#using-apptainersingularity-containers"></a>
</h3>
<p>A <code>rang</code> object can be used to recreate the computational environment via <a href="https://github.com/rocker-org/rocker" class="external-link">Rocker</a>. Instead of Docker you can also use <a href="https://apptainer.org/" class="external-link">Apptainer/Singularity</a>. Please note that the oldest R version one can get from Rocker is R 3.1.0.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/apptainerize.html">apptainerize</a></span><span class="op">(</span><span class="va">graph</span>, <span class="st">"~/rocker_test"</span><span class="op">)</span></span>
<span><span class="co"># singularize(graph, "~/rocker_test") # same function, as so far Apptainer is identical to Singularity</span></span></code></pre></div>
<p>Now, you can build and run the Apptainer/Singularity container.</p>
<p>For Apptainer installation:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ~/rocker_test</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="ex">apptainer</span> build container.sif container.def</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="ex">apptainer</span> run container.sif R</span></code></pre></div>
<p>For Singularity installation:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ~/rocker_test</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> singularity build container.sif container.def</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="ex">singularity</span> run container.sif R</span></code></pre></div>
<p>Using the above example, <code><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo()</a></code> outputs the following. You have successfully gone back to the pre-pandemic.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>R version <span class="dv">3</span>.<span class="fl">6.2</span> (<span class="dv">2019-12-12</span>) <span class="sc">--</span> <span class="st">"Dark and Stormy Night"</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Copyright</span> (C) <span class="dv">2019</span> The R Foundation <span class="cf">for</span> Statistical Computing</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>Platform<span class="sc">:</span> x86_64<span class="sc">-</span>pc<span class="sc">-</span>linux<span class="sc">-</span><span class="fu">gnu</span> (<span class="dv">64</span><span class="sc">-</span>bit)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>R is free software and comes with ABSOLUTELY NO WARRANTY.</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>You are welcome to redistribute it under certain conditions.</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>Type <span class="st">'license()'</span> or <span class="st">'licence()'</span> <span class="cf">for</span> distribution details.</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>R is a collaborative project with many contributors.</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>Type <span class="st">'contributors()'</span> <span class="cf">for</span> more information and</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="st">'citation()'</span> on how to cite R or R packages <span class="cf">in</span> publications.</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>Type <span class="st">'demo()'</span> <span class="cf">for</span> some demos, <span class="st">'help()'</span> <span class="cf">for</span> on<span class="sc">-</span>line help, or</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="st">'help.start()'</span> <span class="cf">for</span> an HTML browser interface to help.</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>Type <span class="st">'q()'</span> to quit R.</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">sessionInfo</span>()</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>R version <span class="dv">3</span>.<span class="fl">6.2</span> (<span class="dv">2019-12-12</span>)</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>Platform<span class="sc">:</span> x86_64<span class="sc">-</span>pc<span class="sc">-</span>linux<span class="sc">-</span><span class="fu">gnu</span> (<span class="dv">64</span><span class="sc">-</span>bit)</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>Running under<span class="sc">:</span> Debian GNU<span class="sc">/</span>Linux <span class="dv">10</span> (buster)</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>Matrix products<span class="sc">:</span> default</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>BLAS<span class="sc">/</span>LAPACK<span class="sc">:</span> <span class="er">/</span>usr<span class="sc">/</span>lib<span class="sc">/</span>x86_64<span class="sc">-</span>linux<span class="sc">-</span>gnu<span class="sc">/</span>libopenblasp<span class="sc">-</span>r0.<span class="dv">3</span>.<span class="fl">5.</span>so</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>locale<span class="sc">:</span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] LC_CTYPE<span class="ot">=</span>en_US.UTF<span class="dv">-8</span>       LC_NUMERIC<span class="ot">=</span>C</span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a> [<span class="dv">3</span>] LC_TIME<span class="ot">=</span>en_US.UTF<span class="dv">-8</span>        LC_COLLATE<span class="ot">=</span>en_US.UTF<span class="dv">-8</span></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a> [<span class="dv">5</span>] LC_MONETARY<span class="ot">=</span>en_US.UTF<span class="dv">-8</span>    LC_MESSAGES<span class="ot">=</span>C</span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>] LC_PAPER<span class="ot">=</span>en_US.UTF<span class="dv">-8</span>       LC_NAME<span class="ot">=</span>C</span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a> [<span class="dv">9</span>] LC_ADDRESS<span class="ot">=</span>C               LC_TELEPHONE<span class="ot">=</span>C</span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a>[<span class="dv">11</span>] LC_MEASUREMENT<span class="ot">=</span>en_US.UTF<span class="dv">-8</span> LC_IDENTIFICATION<span class="ot">=</span>C</span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>attached base packages<span class="sc">:</span></span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] stats     graphics  grDevices utils     datasets  methods   base</span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a>loaded via a <span class="fu">namespace</span> (and not attached)<span class="sc">:</span></span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] compiler_3.<span class="fl">6.2</span></span></code></pre></div>
<p><code><a href="reference/apptainerize.html">apptainerize()</a></code>/<code><a href="reference/apptainerize.html">singularize()</a></code> functions work exactly the same as <code><a href="reference/dockerize.html">dockerize()</a></code>, except you cannot cache Linux distribution rootfs.</p>
</div>
<div class="section level3">
<h3 id="apptainersingularity-with-rstudio-ide">Apptainer/Singularity with RStudio IDE<a class="anchor" aria-label="anchor" href="#apptainersingularity-with-rstudio-ide"></a>
</h3>
<p>To run RStudio IDE in Apptainer/Singularity container, some writeable folders and a config file have to be created locally:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> run var-lib-rstudio-server .rstudio</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="bu">printf</span> <span class="st">'provider=sqlite\ndirectory=/var/lib/rstudio-server\n'</span> <span class="op">&gt;</span> database.conf</span></code></pre></div>
<p>After that, you can run the container (do not run as <code>root</code> user, otherwise you will not be able to login to RStudio IDE).</p>
<p>Start instance (on default RSTUDIO port 8787):</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">apptainer</span> instance start <span class="dt">\</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> run:/run,var-lib-rstudio-server:/var/lib/rstudio-server,database.conf:/etc/rstudio/database.conf,.rstudio:/home/rstudio/.rstudio/ <span class="dt">\</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    container.sif <span class="dt">\</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    rangtest</span></code></pre></div>
<p>Now open a browser and go to localhost:8787. The default username is your local username, default password is ‘set_your_password’ (if you are using container generated by rang).</p>
<p>List running instances:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">apptainer</span> instance list</span></code></pre></div>
<p>Stop instance:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">apptainer</span> instance stop rangtest</span></code></pre></div>
<p>Start instance with custom port (e.g. 8080) and password:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">apptainer</span> instance start <span class="dt">\</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">--env</span> RPORT=8080</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="ex">--env</span> PASSWORD=<span class="st">'set_your_password'</span> <span class="dt">\</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> run:/run,var-lib-rstudio-server:/var/lib/rstudio-server,database.conf:/etc/rstudio/database.conf,.rstudio:/home/rstudio/.rstudio/ <span class="dt">\</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    container.sif <span class="dt">\</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    rangtest</span></code></pre></div>
<p>Run container with custom <code>rserver</code> command line:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">apptainer</span> exec <span class="dt">\</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">--env</span> PASSWORD=<span class="st">'set_your_password'</span> <span class="dt">\</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> run:/run,var-lib-rstudio-server:/var/lib/rstudio-server,database.conf:/etc/rstudio/database.conf,.rstudio:/home/rstudio/.rstudio/ <span class="dt">\</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    container.sif <span class="dt">\</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    /usr/lib/rstudio-server/bin/rserver <span class="dt">\</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">--auth-none</span><span class="op">=</span>0 <span class="at">--auth-pam-helper-path</span><span class="op">=</span>pam-helper <span class="dt">\</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">--server-user</span><span class="op">=</span><span class="va">$(</span><span class="fu">whoami</span><span class="va">)</span> <span class="at">--www-port</span><span class="op">=</span>8787</span></code></pre></div>
<p>If you run the container using <code>apptainer exec</code> command, you will have to kill the <code>rserver</code> process manually or Cmd/Ctrl+C from the running container to stop the server.</p>
</div>
</div>
<div class="section level2">
<h2 id="recreate-the-computational-environment-for-r--310">Recreate the computational environment for R &lt; 3.1.0<a class="anchor" aria-label="anchor" href="#recreate-the-computational-environment-for-r--310"></a>
</h2>
<p><code>rang</code> can still be used to recreate computational environments for R &lt; 3.1.0. The Dockerfile generated is based on Debian Lenny (5.0) and the requested version of R is compiled from source. As of writing, this method works for R &lt; 3.1.0 but not R &lt; 1.3.1. The <code>image</code> parameter is ignored in this case.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rang_rio</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/resolve.html">resolve</a></span><span class="op">(</span><span class="st">"rio"</span>, snapshot_date <span class="op">=</span> <span class="st">"2013-08-30"</span><span class="op">)</span> <span class="co">## R 3.0.1</span></span>
<span><span class="fu"><a href="reference/dockerize.html">dockerize</a></span><span class="op">(</span><span class="va">rang_rio</span>, output_dir <span class="op">=</span> <span class="st">"~/old_renviron"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="evercran-support-experimental">
<code>evercran</code> support (experimental)<a class="anchor" aria-label="anchor" href="#evercran-support-experimental"></a>
</h2>
<p><code>rang</code> supports <a href="https://github.com/r-hub/evercran" class="external-link">evercran</a>. As of writing, the support is still experimental (just like <code>evercran</code> itself). In the future, <code>evercran</code> will replace the Debian method.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rang_rio</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/resolve.html">resolve</a></span><span class="op">(</span><span class="st">"rio"</span>, snapshot_date <span class="op">=</span> <span class="st">"2013-08-30"</span><span class="op">)</span> <span class="co">## R 3.0.1</span></span>
<span><span class="fu"><a href="reference/dockerize.html">dockerize</a></span><span class="op">(</span><span class="va">rang_rio</span>, output_dir <span class="op">=</span> <span class="st">"~/old_renviron"</span>, method <span class="op">=</span> <span class="st">"evercran"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="acknowledgment">Acknowledgment<a class="anchor" aria-label="anchor" href="#acknowledgment"></a>
</h2>
<p>The logo of rang is a remix of <a href="https://commons.wikimedia.org/wiki/File:Flag_of_the_Canary_Islands.svg" class="external-link">this</a> public domain image. The two dogs should be <em>Presa Canario</em>, the native dog breed on the islands of Gran Canaria and Tenerife.</p>
<hr>
<ol style="list-style-type: decimal">
<li>It stands for “R Archiving Nerds at GESIS”. The package was previously named <code>gran</code>, but we decided to rename it to <code>rang</code> because there is another package named <a href="https://CRAN.R-project.org/package=GRANBase" class="external-link">gRAN</a>.</li>
</ol>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=rang" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/gesistsa/rang/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/gesistsa/rang/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing rang</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Chung-hong Chan <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-6232-7530" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>David Schoch <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-2952-4812" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/gesistsa/rang/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/gesistsa/rang/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Chung-hong Chan, David Schoch.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
